(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{121:function(t,e,i){},205:function(t,e,i){"use strict";var o=i(121);i.n(o).a},355:function(t,e,i){"use strict";i.r(e);var o=i(0),n=i(1);function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},o=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),o.forEach(function(e){r(t,e,i[e])})}return t}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var a={data:function(){return{showConfirmDelte:!1,copyActive:!1,showInvite:!1,inviteQuery:""}},computed:s({},Object(o.c)(["youtubeApiKeyUI"]),Object(o.e)(["currentMediaSource"]),Object(n.p)("matrix",["credentials","sources","membersIndex","directMessages"]),{currentMatrixRoom:function(){return"matrix"===this.currentMediaSource.type?this.currentMediaSource.id:null},room:function(){return this.sources[this.currentMediaSource.id]},roomMemberIndex:function(){return new Set(this.room.members.map(function(t){return t.id}))},members:function(){var t=this;return this.room.members?this.room.members.map(function(e){return Object.assign({},e,t.membersIndex[e.id]||{name:e.id,nameColor:""})}):[]},membersByType:function(){return{admin:this.members.filter(function(t){return t.powerLevel>=100}),moderator:this.members.filter(function(t){var e=t.powerLevel;return e>=50&&e<100}),other:this.members.filter(function(t){return t.powerLevel<50})}},myId:function(){return this.credentials.userId},_inviteUserList:function(){var t=this;return this.inviteQuery?Object.values(this.membersIndex).filter(function(e){var i=e.userId,o=e.name;return!t.roomMemberIndex.has(i)&&"".concat(i).concat(o).includes(t.inviteQuery)}):[]}}),methods:s({},Object(o.b)(["setRoomName","updateRoomOptions","setRoomTag","leaveMatrixRoom","inviteToMatrixRoom","createMatrixDirectMessageRoom"]),Object(o.d)(["toggleHideRoom","selectMediaSource"]),{_setRoomName:Object(n.d)(function(t,e){this.setRoomName({id:t,name:e})},1e3),_directMessage:function(t){t!==this.myId&&(this.directMessages[t]?this.selectMediaSource({type:"matrix",id:this.directMessages[t]}):this.createMatrixDirectMessageRoom(t))},copyToClip:function(){var t=this;window.getSelection().removeAllRanges();var e=document.createElement("div");e.innerHTML="".concat(window.location.href,"?import=").concat(this.currentMediaSource.id,"&type=").concat(this.currentMediaSource.type,"&title=").concat(encodeURIComponent(this.room.name)),document.body.appendChild(e);var i=document.createRange();i.selectNode(e),window.getSelection().addRange(i);try{document.execCommand("copy"),this.copyActive=!0,setTimeout(function(){t.copyActive=!1},800)}catch(t){this.error("Could not copy to clipboard. ".concat(t))}window.getSelection().removeAllRanges(),e.parentNode.removeChild(e)}})},c=(i(205),i(2)),m=Object(c.a)(a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"settings matrix-settings"},[i("div",{staticClass:"matrix-settings__header"},[i("div",{staticClass:"matrix-settings__logo",style:{backgroundImage:"url('"+t.room.avatarUrl+"')"},attrs:{src:t.room.avatarUrl,alt:t.room.name+" logo"}}),t._v(" "),i("input",{staticClass:"matrix-settings__name",attrs:{type:"text",placeholder:"â€¦ name",disabled:!t.room.isAdmin},domProps:{value:t.room.name},on:{input:function(e){t._setRoomName(t.currentMatrixRoom,e.target.value)}}})]),t._v(" "),i("div",{staticClass:"row matrix-settings__aliases"},t._l(t.room.aliases,function(e){return i("a",{attrs:{href:"https://matrix.to/#/"+e,target:"_blank",rel:"noopener"}},[t._v(t._s(e))])})),t._v(" "),i("div",{staticClass:"spacer"}),t._v(" "),i("div",{staticClass:"matrix-settings__actions"},[i("button",{staticClass:"button btn--grey-ghost",class:{active:t.copyActive},on:{click:t.copyToClip}},[i("span",{staticClass:"wmp-icon-share"}),t._v("\n\t\t\tcopy invite link\n\t\t")]),t._v(" "),i("button",{staticClass:"button btn--grey-ghost",on:{click:function(e){t.toggleHideRoom(t.currentMediaSource.id)}}},[i("span",{class:t.room.hidden?"wmp-icon-visibility":"wmp-icon-visibility_off"}),t._v("\n\t\t\t"+t._s(t.room.hidden?"show":"hide")+"\n\t\t")]),t._v(" "),i("button",{staticClass:"button btn--grey-ghost",on:{click:function(e){t.showConfirmDelte=t.currentMediaSource.id}}},[i("span",{staticClass:"wmp-icon-close"}),t._v("\n\t\t\tleave\n\t\t")])]),t._v(" "),i("div",{staticClass:"spacer"}),t._v(" "),t.room.isAdmin?t._e():i("div",{staticClass:"smaller row"},[i("b",[t._v("You are not an admin")]),t._v(", you can not edit this room.")]),t._v(" "),i("div",{staticClass:"spacer"}),t._v(" "),i("div",{staticClass:"matrix-settings__members_header"},[i("h3",[t._v(t._s(t.room.members.length)+" Members")]),t._v(" "),i("span",{staticClass:"wmp-icon-add_circle",attrs:{title:"add a user"},on:{click:function(e){t.showInvite=!t.showInvite}}})]),t._v(" "),t.showInvite?i("div",[i("h4",[t._v("Invite")]),t._v(" "),i("div",{staticClass:"matrix-settings__invite-in"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.inviteQuery,expression:"inviteQuery"}],attrs:{type:"text",placeholder:"... user name, email, telephone"},domProps:{value:t.inviteQuery},on:{input:function(e){e.target.composing||(t.inviteQuery=e.target.value)}}}),t._v(" "),i("span",{staticClass:"wmp-icon-search"})]),t._v(" "),i("div",{staticClass:"matrix-settings__members"},[t._l(t._inviteUserList,function(e){return i("div",{attrs:{title:e.userId},on:{click:function(i){t.inviteToMatrixRoom({userId:e.userId,roomId:t.room.roomId}),t.inviteQuery=""}}},[i("span",{style:{color:e.nameColor}},[t._v(" "+t._s(e.name)+" ")]),t._v(" "),t._m(0,!0)])}),t._v(" "),t._inviteUserList.length?t._e():i("div",[t._v(" ... nothing found")])],2)]):t._e(),t._v(" "),t._l(["admin","moderator","other"],function(e){return t.membersByType[e].length?i("div",[i("h4",[t._v(t._s(e)+"s")]),t._v(" "),i("div",{staticClass:"matrix-settings__members"},t._l(t.membersByType[e],function(e){return i("div",{class:{"matrix-settings--me":e.id===t.myId},attrs:{title:e.id},on:{click:function(i){t._directMessage(e.id)}}},[i("span",{style:{color:e.nameColor}},[t._v("\n\t\t\t\t\t"+t._s(e.name||e.id))]),t._v(" "),t._m(1,!0)])}))]):t._e()}),t._v(" "),i("h3",[t._v("Options")]),t._v(" "),i("div",{staticClass:"row"},[i("div",[i("input",{attrs:{type:"checkbox",disabled:!t.room.isAdmin,id:"hidden-room"},domProps:{checked:t.room.isHidden},on:{change:function(e){t.updateRoomOptions({id:t.currentMatrixRoom,isHidden:e.target.checked})}}}),i("label",{attrs:{for:"hidden-room"}}),t._v("\n\t\t\tHidden\n\t\t\t"),i("span",{staticClass:"smaller"},[t._v("Not publicly listed")])]),t._v(" "),i("div",[i("input",{attrs:{type:"checkbox",disabled:!t.room.isAdmin,id:"allow-guests"},domProps:{checked:t.room.allowGuests},on:{change:function(e){t.updateRoomOptions({id:t.currentMatrixRoom,allowGuests:e.target.checked})}}}),i("label",{attrs:{for:"allow-guests"}}),t._v("\n\t\t\tAllow guests to join\n\t\t")])]),t._v(" "),t.showConfirmDelte?i("div",{staticClass:"modal",on:{click:function(e){t.showConfirmDelte=!1}}},[i("div",{staticClass:"modal__body",on:{click:function(t){t.stopPropagation()}}},[t._v("\n\t\t\t\tAre you sure you want to leave the room?\n\t\t\t\t"),i("div",{staticClass:"modal__btn-group"},[i("button",{staticClass:"button",on:{click:function(e){t.showConfirmDelte=!1}}},[t._v("Cancel")]),t._v(" "),i("button",{staticClass:"button btn--blue",on:{click:function(e){e.stopPropagation(),t.leaveMatrixRoom(t.showConfirmDelte),t.showConfirmDelte=!1}}},[t._v("Leave")])])])]):t._e()],2)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this._v("\n\t\t\t\t\tinvite\n\t\t\t\t\t"),e("div",{staticClass:"wmp-icon-add"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",{staticClass:"wmp-icon-chat",attrs:{title:"Send direct message"}})])}],!1,null,null,null);m.options.__file="matrix-room-settings.vue";e.default=m.exports}}]);