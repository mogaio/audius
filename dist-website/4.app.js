(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{142:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(329);Object.defineProperty(r,"actions",{enumerable:!0,get:function(){return n.actions}});var i=t(330);Object.defineProperty(r,"mutations",{enumerable:!0,get:function(){return i.mutations}});var s=t(82);Object.defineProperty(r,"presistMutation",{enumerable:!0,get:function(){return s.presistMutation}});var a=t(83);Object.defineProperty(r,"state",{enumerable:!0,get:function(){return a.state}})},329:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.actions=void 0;var n=t(2);function i(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}function s(e){window.dispatchEvent(new CustomEvent("audiusExtension",{detail:e}))}r.actions={renameWebScraper:function(e,r){var t=e.state,n=e.commit,i=r.oldName,s=r.newName;t.sources[s]||(n("renameWebScraper",{oldName:i,newName:s}),n("selectMediaSource",{type:"webScraper",id:s}))},webScraperUpdateSuccess:function(e,r){var t=e.state,n=e.commit,s=r.id,a=r.mediaList;if(a){var u=t.sources[s],o=u?u.playList:[],c=u&&u.archive?u.archive:[],d=new Set([].concat(i(o.map(function(e){return e.id})),i(c))),l=a.filter(function(e){return!d.has(e.id)});if(l.length){n("updateMediaIndex",l);for(var p=[].concat(i(o),i(l));p.length>3e3;){var f=p.shift();c.push(f.id)}l.length&&n("updateWebScraper",{id:s,values:{playList:p,archive:c}})}else n("error","No new videos found for "+s+". Try agin.")}else n("error","Requesting "+s+" did not return results.")},initWebScraper:function(e,r){var t=e.state,n=e.commit,i=e.dispatch;!r||r in t.sources||n("addWebScraper",r),t.sources[r].playList.length||i("webScraperLoadMore",r)},webScraperLoadMore:function(e,r){var t=e.state,i=e.commit,a=e.dispatch,u=e.rootState;if(r){var o=t.sources[r],c=u.paginationIndex[r]||0;if("Imgur"===r){if(u.isLoading[r])return;i("toggleIsLoading",{id:r,loading:!0}),i("increasePaginationIndex",r),n.webScraper.getImgurMedia(u.paginationIndex[r]).then(function(e){a("webScraperUpdateSuccess",{id:r,mediaList:e})}).catch(function(e){return i("error","Could not get Imgur. "+e)}).finally(function(){return i("toggleIsLoading",{id:r,loading:!1})})}else if("script"===o.settings.type)i("increasePaginationIndex",r),t.sourcesInitialized[r]?s({audius:!0,type:"getNext",id:r}):s({audius:!0,type:"loadScript",id:r,code:o.settings.script,youtubeApiKey:t.youtubeApiKey,responseTemplate:{audius:!0,vuex:"commit",type:"initScraperSuccess",data:r}});else if("urls"===o.settings.type){var d=c;if(c>=o.settings.numPages-1)i("error","Checked all URLs in channel, try again next time.");else if(o.settings.urls){var l=0,p=void 0;if(o.settings.urls.every(function(e){return(l+=e.numPages)>c?(p=e.url,!1):(d-=e.numPages,!0)}),!t.extensionAvilable)return i("error","The audius extension is not installed. Please install it."),void i("setShowSettings");i("increasePaginationIndex",r),s({audius:!0,type:"scanUrl",url:n.webScraper.patternToUrls(p)[d],youtubeApiKey:t.youtubeApiKey,responseTemplate:{audius:!0,vuex:"dispatch",type:"webScraperUpdateSuccess",data:{id:r}}})}else i("error","Channel URLs missing")}}else i("error",'Can not find channel "'+r+'".')}}},330:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mutations=void 0;var n=t(2);function i(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}r.mutations={recoverState_webScraper:function(e,r){Object.assign(e,r)},addWebScraper:function(e,r){if(!r){var t=1;for(r="Channel "+t;r in e.sources;)r="Channel "+t++}e.sources[r]={playList:[],playedMedia:{},settings:{},archive:[]},e.sourcesOrdered.includes(r)||e.sourcesOrdered.push(r),e.currentWebScraper=r},deleteWebScraper:function(e,r){delete e.sources[r],e.sourcesOrdered=e.sourcesOrdered.filter(function(e){return e!==r})},initScraperSuccess:function(e,r){e.sourcesInitialized[r]=!0},addUrlPattern:function(e,r){var t=r.id,s=r.urlPattern,a=e.sources[t].settings.urls||[],u=e.sources[t].settings;a.some(function(e){return e===s})||(u.urls=[].concat(i(a),[{url:s,numPages:n.webScraper.patternToUrls(s).length}]),u.numPages=u.urls.reduce(function(e,r){return e+r.numPages},0)),e.sources=Object.assign({},e.sources)},updateWebScraper:function(e,r){var t=r.id,n=r.values;e.sources[t]=Object.assign({},e.sources[t],n),e.sources=Object.assign({},e.sources)},renameWebScraper:function(e,r){var t=r.newName,n=r.oldName,s=Object.assign({},e.sources);s[t]=s[n];var a=[].concat(i(e.sourcesOrdered));a[a.indexOf(n)]=t,delete s[n],e.sources=s,e.sourcesOrdered=a}}}}]);