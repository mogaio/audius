webpackJsonp([9],{126:function(e,t,i){"use strict";function n(e){o||i(375)}Object.defineProperty(t,"__esModule",{value:!0});var a=i(243),s=i.n(a);for(var r in a)"default"!==r&&function(e){i.d(t,e,function(){return a[e]})}(r);var d=i(377),o=!1,c=i(1),l=n,m=c(s.a,d.a,!1,l,null,null);m.options.__file="src/components/media-edit.vue",t.default=m.exports},243:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},a=i(0),s=i(10),r=i(4);t.default={data:function(){return{copyActive:!1,selectedMediaSourceTab:"tags"}},computed:n({},(0,a.mapState)(["showMediaEdit","entities","sourcesOrdered","sources","playList","currentMediaSource","matrix","webScraper"]),(0,r.mapModuleState)("webScraper",{webScrapers:"sources",webScrapersOrdered:"sourcesOrdered"}),(0,r.mapModuleState)("matrix",{matrixRooms:"sources",matrixRoomsOrdered:"sourcesOrdered",matrixLoggedIn:"matrixLoggedIn"}),{media:function(){return this.showMediaEdit?(0,s.getMediaEntity)(this.$store.state,this.showMediaEdit):{}},removeFrom:function(){var e=this,t={tags:this.sourcesOrdered.filter(function(t){return e.sources[t].includes(e.media.id)}),matrixRooms:this.matrix.sourcesOrdered.filter(function(t){return e.matrix.sources[t].playList.some(function(t){return t.id===e.media.id})}),webScrapers:this.webScraper.sourcesOrdered.filter(function(t){return e.webScraper.sources[t].playList.some(function(t){return t.id===e.media.id})})};return this.playList.includes(this.media.id)&&t.tags.unshift("Default"),t},addTo:function(){var e=this,t=this.removeFrom,i={tags:this.sourcesOrdered.filter(function(e){return!t.tags.includes(e)}),matrixRooms:this.matrixRoomsOrdered.filter(function(t){return!e.matrixRooms[t].playList.some(function(t){return t.id===e.media.id})})};return i.tags.includes("Default")||this.playList.includes(this.media.id)||i.tags.unshift("Default"),i},sourceLink:function(){return"youtube"===this.media.type?this.youtubeLink():this.media.href?this.media.href:""},sourceApiNames:function(){return[{api:"tags",label:"playlist"},{api:"matrixRooms",label:"room"},{api:"webScrapers",label:"channel"}]},backgroundImage:function(){return"youtube"!==this.media.type||this.media.hasError?this.media.thumbUrl?"url("+this.media.thumbUrl+")":"":"url(https://i.ytimg.com/vi/"+(this.media.youtubeId||this.media.id)+"/default.jpg)"}}),methods:n({},(0,a.mapActions)(["matrixSend","matrixRedact"]),(0,a.mapMutations)(["updateMedia","addSearchResult","removeMedia","play","queue"]),{_setName:(0,r.debounce)(function(e){this.patchMedia({name:e})},1e3),id2name:function(e){return this.matrixRooms[e].name},addMediaTo:function(e,t){"matrixRooms"===e?this.matrixSend({media:this.media,roomId:t}):"tags"===e&&this.addSearchResult({media:this.media,tagName:"Default"===t?"":t})},removeMediaFrom:function(e,t){"matrixRooms"===e?this.matrixRedact(this.media):"tags"===e&&this.removeMedia({mediaIds:[this.media.id],tagName:"Default"===t?"":t})},youtubeLink:function(){return this.media?(0,r.youtubeLink)(this.media):""},copyToClip:function(){var e=this;window.getSelection().removeAllRanges();var t=document.createElement("div");t.innerHTML=(0,r.getMediaLink)(this.media),document.body.appendChild(t);var i=document.createRange();i.selectNode(t),window.getSelection().addRange(i);try{document.execCommand("copy"),this.copyActive=!0,setTimeout(function(){e.copyActive=!1,e.selected=!1},800)}catch(e){this.error("Error copying to clipboard "+e)}window.getSelection().removeAllRanges(),t.parentNode.removeChild(t)}})}},375:function(e,t,i){var n=i(376);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i(3)("203161d2",n,!1)},376:function(e,t,i){t=e.exports=i(2)(void 0),t.push([e.i,'\n.settings.media-edit {\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  height: 100%;\n}\n.settings.media-edit p {\n    text-align: center;\n}\n.settings.media-edit ul {\n    padding: 0;\n    list-style: none;\n}\n.settings.media-edit ul li {\n      height: 2.25rem;\n      display: flex;\n      align-items: center;\n      padding: 0.45rem;\n      cursor: pointer;\n}\n.settings.media-edit ul li.active {\n        color: #2DA7EF;\n}\n.settings.media-edit ul li *:first-child {\n        flex: 1;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n}\n.settings.media-edit ul li [class^="wmp-icon"] {\n        display: none;\n}\n.settings.media-edit ul li:hover *:last-child {\n        display: block;\n}\n.settings.media-edit ul li:nth-child(odd) {\n        background: #EFF1F7;\n}\n.settings.media-edit ul li:hover {\n        background: #E2E4E9;\n}\n.settings.media-edit .row, .settings.media-edit h3, .settings.media-edit h4, .settings.media-edit .media-edit__name {\n    padding: 0 0.45rem;\n}\n.settings.media-edit .spacer {\n    height: 0.9rem;\n}\n.settings.media-edit th, .settings.media-edit label {\n    text-align: left;\n    font-weight: normal;\n    color: #C8CCD5;\n    text-transform: uppercase;\n    font-size: .7rem;\n    padding-right: 0.9rem;\n}\n.media-edit__header {\n  height: 3.15rem;\n  margin: 0.45rem;\n  display: flex;\n}\n.media-edit__header > *:first-child {\n    height: 3.15rem;\n    width: 3.15rem;\n}\n.media-edit__header .media-edit__name {\n    flex: 1;\n    font-size: 1.2rem;\n    height: 3.15rem;\n    width: 100%;\n    margin-bottom: 0.45rem;\n}\n.media-edit__body {\n  flex: 1;\n  overflow-y: auto;\n}\n.media-edit__link-buttons > .button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  white-space: nowrap;\n  margin-right: 0.9rem;\n  width: 3.15rem;\n  border: 0;\n  color: #707379;\n}\n.media-edit__link-buttons > .button:hover {\n    color: #2DA7EF;\n}\n.media-edit__link-buttons > .button span {\n    height: 1.8rem;\n}\n.copy {\n  transition: all 250ms;\n}\n.copy.active, .copy.active:hover {\n    background: #a1c616;\n    border-color: #a1c616;\n    color: #fff;\n}\n.media-edit__limits {\n  width: 100%;\n  overflow: hidden;\n  padding: 0 0.45rem;\n}\n.media-edit__limits > div:first-child {\n    margin-right: 0.9rem;\n}\n.media-edit__limits label + div {\n    display: flex;\n    align-items: center;\n}\n.media-edit__limits label + div input {\n      width: 6.3rem;\n      margin-right: 0.45rem;\n}\n',""])},377:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.showMediaEdit?i("div",{staticClass:"settings media-edit"},[i("div",{staticClass:"media-edit__header"},[i("div",{staticClass:"media-list__thumbnail",style:{backgroundImage:e.backgroundImage}}),e._v(" "),i("input",{staticClass:"media-edit__name",attrs:{type:"text",placeholder:"… title"},domProps:{value:e.media.title},on:{input:function(t){e._setMediaTitle(e.currentMediaSource.id,t.target.value)}}})]),e._v(" "),i("div",{staticClass:"media-edit__body"},[i("div",{staticClass:"button-group media-edit__link-buttons"},[i("button",{staticClass:"button",attrs:{title:"Play"},on:{click:function(t){e.play({media:e.media})}}},[i("span",{staticClass:"wmp-icon-play"})]),e._v(" "),i("button",{staticClass:"button",class:{active:e.copyActive},attrs:{title:"Add to queue"},on:{click:function(t){e.queue(e.media)}}},[i("span",{staticClass:"wmp-icon-queue2 icon--small"})]),e._v(" "),i("button",{staticClass:"button",class:{active:e.copyActive},attrs:{title:"Copy name and URL"},on:{click:e.copyToClip}},[i("span",{staticClass:"copy wmp-icon-copy icon--small",class:{active:e.copyActive}})]),e._v(" "),i("a",{staticClass:"button",attrs:{title:"Visit media source",target:"_blank",href:e.sourceLink}},[i("span",{class:{"wmp-icon-link":["video","audio"].includes(e.media.type),"wmp-icon-youtube icon--small":"youtube"===e.media.type,"wmp-icon-vimeo  icon--small":"vimeo"===e.media.type}})])]),e._v(" "),i("div",{staticClass:"spacer"}),e._v(" "),i("div",{staticClass:"spacer"}),e._v(" "),i("div",{staticClass:"button-group"},e._l(e.sourceApiNames,function(t){return i("button",{staticClass:"button btn--blue-ghost",class:{"btn--blue":e.selectedMediaSourceTab==t.api},on:{click:function(i){e.selectedMediaSourceTab=t.api}}},[e._v(e._s(t.label))])})),e._v(" "),e._l(e.sourceApiNames,function(t){return e.selectedMediaSourceTab==t.api?i("div",[i("ul",e._l(e.removeFrom[t.api],function(n){return i("li",{staticClass:"active",attrs:{title:"tags"===t.api?"Remove from "+t.label:""},on:{click:function(i){e.removeMediaFrom(t.api,n)}}},[i("div",[e._v(" "+e._s("matrixRooms"===t.api?e.id2name(n):n)+" ")]),e._v(" "),"tags"===t.api?i("span",{staticClass:"wmp-icon-close"}):e._e()])})),e._v(" "),i("ul",{attrs:{if:"src.api in addTo"}},e._l(e.addTo[t.api],function(n){return i("li",{attrs:{title:"Add to "+t.label},on:{click:function(i){e.addMediaTo(t.api,n)}}},[i("div",[e._v(" "+e._s("matrixRooms"===t.api?e.id2name(n):n)+" ")]),e._v(" "),i("span",{staticClass:"wmp-icon-add"})])}))]):e._e()}),e._v(" "),"webScrapers"!=e.selectedMediaSourceTab||e.removeFrom.webScrapers.length?e._e():i("p",[e._v("\n\t\t\t… nothing found\n\t\t")]),e._v(" "),"matrixRooms"!=e.selectedMediaSourceTab||e.matrixLoggedIn?e._e():i("p",[e._v("\n\t\t\t… matrix not connected\n\t\t")]),e._v(" "),i("div",{staticClass:"spacer"})],2)]):e._e()},a=[];n._withStripped=!0;var s={render:n,staticRenderFns:a};t.a=s}});