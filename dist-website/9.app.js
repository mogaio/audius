(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{145:function(t,e,r){"use strict";r.r(e);var s=r(493),a=r(222);for(var i in a)"default"!==i&&function(t){r.d(e,t,function(){return a[t]})}(i);r(345);var n=r(0),u=Object(n.a)(a.default,s.a,s.b,!1,null,null,null);u.options.__file="web-scraper-settings.vue",e.default=u.exports},222:function(t,e,r){"use strict";r.r(e);var s=r(223),a=r.n(s);for(var i in s)"default"!==i&&function(t){r.d(e,t,function(){return s[t]})}(i);e.default=a.a},223:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},a=function(t){return t&&t.__esModule?t:{default:t}}(r(47)),i=r(1),n=r(2);e.default={components:{draggable:a.default},computed:s({},(0,i.mapGetters)(["youtubeApiKeyUI"]),(0,i.mapState)(["currentMediaSource","extensionAvilable"]),(0,n.mapModuleState)("webScraper",["sources","forward"]),(0,i.mapState)({matrixSources:function(t){return t.matrix.sources},matrixSourcesOrdered:function(t){return t.matrix.sourcesOrdered}}),{settings:function(){var t=this.currentMediaSource,e=t.id;return"webScraper"!==t.type?{}:this.sources[e].settings||{}},_forwards:function(){return this.forward[this.currentMediaSource.id]||[]},_forwardSources:function(){var t=this.forward[this.currentMediaSource.id]||[],e=new Set(t.map(function(t){return t.id}));return this.matrixSourcesOrdered.filter(function(t){return!e.has(t)})},_urls:{get:function(){return this.settings.urls||[]},set:function(t){this.updateWebScraper({id:this.currentMediaSource.id,values:{settings:s({},this.settings,{urls:t})}})}}}),methods:s({},(0,i.mapMutations)(["updateWebScraper","addUrlPattern","editWebScraperForward"]),(0,i.mapActions)(["renameWebScraper"]),{updateSettings:function(t){this.updateWebScraper({id:this.currentMediaSource.id,values:{settings:s({},this.settings,t)}})},_editWatchPage:function(){var t=this.$refs.watchInput;this.updateWebScraper({id:this.currentMediaSource.id,values:{settings:s({},this.settings,{watchUrl:t.value})}}),t.value=""},_addUrlPattern:function(){var t=this.$refs.urlInput;this.addUrlPattern({id:this.currentMediaSource.id,urlPattern:t.value}),t.value=""},removeUrl:function(t){this.updateSettings({urls:this._urls.filter(function(e){return e.url!==t})})},addForward:function(){var t=this.$refs.forward.value,e=this.forward[this.currentMediaSource.id]||[];this.editWebScraperForward({id:this.currentMediaSource.id,forward:[].concat(function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}(e),[{type:"matrix",id:t}])})},removeForward:function(t){var e=this.forward[this.currentMediaSource.id]||[];this.editWebScraperForward({id:this.currentMediaSource.id,forward:e.filter(function(e){return e.id!==t})})}})}},224:function(t,e,r){},345:function(t,e,r){"use strict";var s=r(224);r.n(s).a},493:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"settings ws-settings"},[t.extensionAvilable?t._e():r("p",{staticClass:"smaller"},[t._v("\n\t\tPlease install the "),r("a",{attrs:{href:"https://chrome.google.com/webstore/detail/ekpajajepcojhnjmlibfbjmdjcafajoh",target:"_blank"}},[t._v("Audius extension")]),t._v(" for this feature.\n\t")]),t._v(" "),r("input",{staticClass:"ws-settings__name",attrs:{type:"text",placeholder:"... name"},domProps:{value:this.currentMediaSource.id},on:{input:function(e){t.renameWebScraper({oldName:t.currentMediaSource.id,newName:e.target.value})}}}),t._v(" "),r("div",{staticClass:"button-group"},[r("button",{staticClass:"button btn--tab",class:{"btn--tab-active":"urls"==t.settings.type},on:{click:function(e){t.updateSettings({type:"urls"})}}},[t._v("URL patterns")]),t._v(" "),r("button",{staticClass:"button btn--tab",class:{"btn--tab-active":"script"==t.settings.type},on:{click:function(e){t.updateSettings({type:"script"})}}},[t._v("Script")]),t._v(" "),r("button",{staticClass:"button btn--tab",class:{"btn--tab-active":"watch"==t.settings.type},on:{click:function(e){t.updateSettings({type:"watch"})}}},[t._v("Watch")])]),t._v(" "),"script"==t.settings.type?r("div",{staticClass:"ws-settings__script"},[r("textarea",{staticClass:"input--border",attrs:{rows:"10"},domProps:{value:t.settings.script},on:{input:function(e){e.stopPropagation(),t.updateSettings({script:e.target.value})}}}),t._v(" "),t._m(0)]):t._e(),t._v(" "),"watch"==t.settings.type?r("div",{staticClass:"ws-settings__watch"},[r("div",[t._v(t._s(t.settings.watchUrl))]),t._v(" "),r("div",[r("input",{ref:"watchInput",attrs:{type:"text",placeholder:"… http://music.slack.com/"}}),t._v(" "),r("span",{staticClass:"wmp-icon-add",on:{click:t._editWatchPage}})]),t._v(" "),r("p",{staticClass:"smaller"},[t._v("\n\t\t\tScrape media links from an open tab in your browser.\n\t\t")])]):t._e(),t._v(" "),"urls"==t.settings.type?r("div",[r("h3",[t._v("URLS")]),t._v(" "),r("draggable",{staticClass:"input-list",attrs:{element:"ul",options:{animation:150,scrollSpeed:20}},model:{value:t._urls,callback:function(e){t._urls=e},expression:"_urls"}},t._l(t._urls,function(e){return r("li",[r("div",[t._v("\n\t\t\t\t\t"+t._s(e.url)+"\n\t\t\t\t")]),t._v(" "),r("div",[t._v("\n\t\t\t\t\t("+t._s(e.numPages)+" Page"+t._s(e.numPages>1?"s":"")+")\n\t\t\t\t")]),t._v(" "),r("div",{staticClass:"input-list__menu"},[r("span",{staticClass:"wmp-icon-close",attrs:{title:"Delte URL"},on:{click:function(r){t.removeUrl(e.url)}}})])])})),t._v(" "),r("ul",{staticClass:"input-list"},[r("li",[r("input",{ref:"urlInput",attrs:{type:"text",placeholder:"… http://www.example.com/page/[1-100]"}}),t._v(" "),r("span",{staticClass:"wmp-icon-add",on:{click:t._addUrlPattern}})])])],1):t._e(),t._v(" "),t.matrixSourcesOrdered.length?r("div",[r("h3",[t._v("Forward")]),t._v(" "),r("p",[t._v("\n\t\t\tPost new items to a matrix room.\n\t\t")]),t._v(" "),r("div",{staticClass:"ws-settings__forward-list"},t._l(t._forwards,function(e,s){return r("div",{key:s},[r("div",[t._v(t._s(t.matrixSources[e.id].name))]),t._v(" "),r("span",{staticClass:"wmp-icon-close",on:{click:function(r){t.removeForward(e.id)}}})])})),t._v(" "),r("div",{staticClass:"ws-settings__new-forward"},[r("select",{ref:"forward"},t._l(t._forwardSources,function(e){return r("option",{domProps:{value:e}},[t._v(t._s(t.matrixSources[e].name))])})),t._v(" "),r("span",{staticClass:"wmp-icon-add",on:{click:t.addForward}})])]):t._e()])},a=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"smaller"},[this._v("The code is executed in a "),e("a",{attrs:{href:"https://developer.chrome.com/extensions/sandboxingEval"}},[this._v("secure sandbox")]),this._v(" in the extension.")])}];r.d(e,"a",function(){return s}),r.d(e,"b",function(){return a})}}]);