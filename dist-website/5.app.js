webpackJsonp([5],{104:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(308);Object.defineProperty(r,"actions",{enumerable:!0,get:function(){return n.actions}});var s=t(309);Object.defineProperty(r,"mutations",{enumerable:!0,get:function(){return s.mutations}});var i=t(311);Object.defineProperty(r,"presistMutation",{enumerable:!0,get:function(){return i.presistMutation}});var a=t(15);Object.defineProperty(r,"state",{enumerable:!0,get:function(){return a.state}})},308:function(e,r,t){"use strict";function n(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}function s(e){window.dispatchEvent(new CustomEvent("audiusExtension",{detail:e}))}Object.defineProperty(r,"__esModule",{value:!0}),r.actions=void 0;var i=t(4);r.actions={webScraperUpdateSuccess:function(e,r){var t=e.state,s=e.commit,i=r.id,a=r.mediaList;if(!a)return void s("error","Requesting "+i+" did not return results.");var u=t.sources[i],o=u?u.playList:[],c=u&&u.archive?u.archive:[],d=new Set([].concat(n(o.map(function(e){return e.id})),n(c))),l=a.filter(function(e){return!d.has(e.id)});if(!l.length)return void s("error","No new videos found for "+i+". Try agin.");for(var p=[].concat(n(o),n(l));p.length>3e3;){var f=p.shift();c.push(f.id)}l.length&&s("updateWebScraper",{id:i,values:{playList:p,archive:c}})},initWebScraper:function(e,r){var t=e.state,n=e.commit,s=e.dispatch;!r||r in t.sources||n("addWebScraper",r),t.sources[r].playList.length||s("runWebScraper",r)},runWebScraper:function(e,r){var t=e.state,n=e.commit,a=e.dispatch;if(!r)return void n("error",'Can not find channel "'+r+'".');var u=t.sources[r],o=t.paginationIndex[r]||0;if("Imgur"===r)n("setPaginationIndex",{id:r,index:o+1}),i.webScraper.getImgurMedia(t.paginationIndex[r]).then(function(e){a("webScraperUpdateSuccess",{id:r,mediaList:e})}).catch(function(e){return n("error","Could not get Imgur. "+e)});else if("script"===u.settings.type)n("setPaginationIndex",{id:r,index:o+1}),s(t.sourcesInitialized[r]?{audius:!0,type:"getNext",id:r}:{audius:!0,type:"loadScript",id:r,code:u.settings.script,youtubeApiKey:t.youtubeApiKey,responseTemplate:{audius:!0,vuex:"commit",type:"initScraperSuccess",data:r}});else if("urls"===u.settings.type){var c=o;if(o>=u.settings.numPages-1)n("error","Checked all URLs in channel, try again next time.");else if(u.settings.urls){var d=0,l=void 0;if(u.settings.urls.every(function(e){return(d+=e.numPages)>o?(l=e.url,!1):(c-=e.numPages,!0)}),!t.extensionAvilable)return n("error","The audius extension is not installed. Please install it."),void n("setShowSettings");n("setPaginationIndex",{id:r,index:o+1}),s({audius:!0,type:"scanUrl",url:i.webScraper.patternToUrls(l)[c],youtubeApiKey:t.youtubeApiKey,responseTemplate:{audius:!0,vuex:"dispatch",type:"webScraperUpdateSuccess",data:{id:r}}})}else n("error","Channel URLs missing")}}}},309:function(e,r,t){"use strict";function n(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.mutations=void 0;var s=t(4),i=t(310);r.mutations={addWebScraper:function(e,r){if(!r){var t=1;for(r="Channel "+t;r in e.sources;)r="Channel "+t++}e.sources[r]={playList:[],playedMedia:{},settings:{},archive:[]},e.sourcesOrdered.includes(r)||e.sourcesOrdered.push(r),e.currentWebScraper=r},deleteWebScraper:function(e,r){delete e.sources[r],e.sourcesOrdered=e.sourcesOrdered.filter(function(e){return e!==r})},initScraperSuccess:function(e,r){e.sourcesInitialized[r]=!0},addUrlPattern:function(e,r){var t=r.id,i=r.urlPattern,a=e.sources[t].settings.urls||[],u=e.sources[t].settings;a.some(function(e){return e===i})||(u.urls=[].concat(n(a),[{url:i,numPages:s.webScraper.patternToUrls(i).length}]),u.numPages=u.urls.reduce(function(e,r){return e+r.numPages},0)),e.sources=Object.assign({},e.sources)},setShowWatched:function(e,r){var t=r.id,n=r.toggleState;e.showWatched[t]=n,e.showWatched=Object.assign({},e.showWatched)},setPaginationIndex:function(e,r){var t=r.id,n=r.index;e.paginationIndex[t]=n,e.paginationIndex=Object.assign({},e.paginationIndex)},updateWebScraper:function(e,r){var t=r.id,n=r.values;e.sources[t]=Object.assign({},e.sources[t],n),e.sources=Object.assign({},e.sources)},renameWebScraper:function(e,r){var t=r.newName,n=r.oldName;(0,i.rename)(e,"webScraper",t,n)}}},310:function(e,r,t){"use strict";function n(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}function s(e,r,t,s){if(!e[r].sources[t]){var i=Object.assign({},e[r].sources);i[t]=i[s];var a=[].concat(n(e[r].sourcesOrdered));a[a.indexOf(s)]=t,delete i[s],e[r].sources=i,e[r].sourcesOrdered=a,e.currentMediaSource.id=t}}Object.defineProperty(r,"__esModule",{value:!0}),r.rename=s},311:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.presistMutation={play:["sources","matrixRooms"],nextVideo:["sources"],updateWebScraper:["sources"],addUrlPattern:["sources"],addWebScraper:["sourcesOrdered","sources"],renameWebScraper:["sourcesOrdered","sources"]}}});