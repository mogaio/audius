webpackJsonp([7],{121:function(e,t,r){"use strict";function i(e){l||r(356)}Object.defineProperty(t,"__esModule",{value:!0});var a=r(236),n=r.n(a);for(var o in a)"default"!==o&&function(e){r.d(t,e,function(){return a[e]})}(o);var u=r(358),l=!1,s=r(1),d=i,c=s(n.a,u.a,!1,d,null,null);c.options.__file="src/components/web-media-player.vue",t.default=c.exports},236:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},a=r(0),n=r(4);window.AudioContext=window.AudioContext||window.webkitAudioContext,t.default={data:function(){return{player:null,_mediaUrl:"",timeInterval:void 0,skipToTimeLocal:0,audioPlayer:new Audio,videoPlayer:void 0}},mounted:function(){var e=this;this.videoPlayer=document.querySelector(".video-player"),this.player=this[this.currentMedia.type+"Player"],this.player.src=this.currentMedia.url,this.player.play(),this.videoPlayer.onended=function(){clearInterval(e.timeInterval),e.nextVideo()}},created:function(){var e=this;this.failCount=0,this.audioPlayer.onended=function(){clearInterval(e.timeInterval),e.nextVideo()},this.subscriptions=[this.$store.watch(function(e){return e.currentMedia},function(){"audio"===e.currentMedia.type?(e.player=e.audioPlayer,e.videoPlayer.pause()):"video"===e.currentMedia.type?(e.player=e.videoPlayer,e.audioPlayer.pause()):(clearInterval(e.timeInterval),e.audioPlayer.pause(),e.videoPlayer.pause(),e._mediaUrl=null),["audio","video"].includes(e.currentMedia.type)&&e.currentMedia.url!==e._mediaUrl&&(e.player.src=e.currentMedia.url,e.currentMedia.start&&(e.player.currentTime=e.currentMedia.start),e._play(e.player),e._startInterval(),e._mediaUrl=e.currentMedia.url)}),this.$store.watch(function(e){return e.isPlaying},function(){"audio"===e.currentMedia.type&&e.isPlaying?(e._play(e.audioPlayer),e._startInterval()):"video"===e.currentMedia.type&&e.isPlaying?(e._play(e.videoPlayer),e._startInterval()):(clearInterval(e.timeInterval),e.videoPlayer.pause(),e.audioPlayer.pause())}),this.$store.watch(function(e){return e.skipToTime},function(){e.player&&e.skipToTimeLocal!==e.skipToTime&&(e.skipToTimeLocal=e.skipToTime,e.player.currentTime=e.skipToTime)})]},beforeDestroy:function(){this.subscriptions.forEach(function(e){e()})},computed:(0,a.mapState)(["currentMedia","mute","skipToTime","isPlaying"]),methods:i({},(0,a.mapMutations)(["play","pause","setCurrentTime","videoError","error","updateCurrentMedia"]),(0,a.mapActions)(["nextVideo"]),{_startInterval:function(){var e=this;clearInterval(this.timeInterval),this.timeInterval=setInterval(function(){e.currentMedia.stop&&e.player.currentTime>=e.currentMedia.stop&&e.nextVideo(),e.setCurrentTime(e.player.currentTime)},1e3)},_play:function(e){var t=this,r=e.play();void 0!==r&&r.then(function(){if(t.failCount=0,!t.currentMedia.durationS){var r=Math.round(e.duration);t.updateCurrentMedia({duration:(0,n.s2time)(r),durationS:r})}}).catch(function(e){t.videoError(e.message),t.error("The video could not be played: "+e.message),t.failCount>=3?(t.error("More than 3 failed playback attempts. Stopping playback."),t.pause()):t.failCount++})}})}},356:function(e,t,r){var i=r(357);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);r(3)("1e4b4886",i,!1)},357:function(e,t,r){t=e.exports=r(2)(void 0),t.push([e.i,"\n.video-player {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  background: #000;\n}\n",""])},358:function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement;return(e._self._c||t)("video",{staticClass:"video-player",attrs:{src:""}},[e._v("\n\tSorry, your browser doesn't support embedded videos.\n")])},a=[];i._withStripped=!0;var n={render:i,staticRenderFns:a};t.a=n}});