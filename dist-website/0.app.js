webpackJsonp([0],{158:function(t,e,o){"use strict";function r(t){u||o(178)}Object.defineProperty(e,"__esModule",{value:!0});var a=o(180),n=o.n(a),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("table",{staticClass:"matrix-login"},[t._m(0),t._v(" "),t._m(1),t._v(" "),o("tr",[o("td"),t._v(" "),o("td",{staticStyle:{"text-align":"right"}},[o("button",{staticClass:"button btn--blue",attrs:{type:"button"},on:{click:t.matrixLogin}},[t._v("Login")])])])])},s=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("tr",[o("td",[t._v("Username")]),t._v(" "),o("td",[o("input",{staticClass:"input--border",attrs:{type:"text",id:"username"}})])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("tr",[o("td",[t._v("Password")]),t._v(" "),o("td",[o("input",{staticClass:"input--border",attrs:{type:"password",id:"password"}})])])}];i._withStripped=!0;var l={render:i,staticRenderFns:s},c=l,u=!1,m=o(1),d=r,p=m(n.a,c,!1,d,null,null);p.options.__file="src/components/matrix-login.vue",p.esModule&&Object.keys(p.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");e.default=p.exports},178:function(t,e,o){var r=o(179);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);o(3)("73030a90",r,!1)},179:function(t,e,o){e=t.exports=o(2)(void 0),e.push([t.i,"",""])},180:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},a=o(0);e.default={methods:r({},(0,a.mapActions)(["loginMatrixWithPassword"]),{matrixLogin:function(){var t=this.$el.querySelector("#username"),e=this.$el.querySelector("#password");this.loginMatrixWithPassword({username:t.value,password:e.value}),this.$el.querySelector("#username").value="",this.$el.querySelector("#password").value=""}})}},34:function(t,e,o){"use strict";function r(t){u||o(344)}Object.defineProperty(e,"__esModule",{value:!0});var a=o(346),n=o.n(a),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"matrix-room play-list-manager__wrapper"},[t.matrixEnabled?t._e():o("div",{staticClass:"play-list-manager__enable-matrix"},[o("a",{attrs:{href:"https://matrix.org/",target:"_blank",rel:"noopener"}},[t._v("Matrix")]),t._v(" is a chat network that allows you to share music and videos with your friends. Press the button to create a guest user and join Matrix.\n\t\t"),o("br"),t._v(" "),o("br"),t._v(" "),o("button",{staticClass:"button btn--blue",attrs:{type:"button"},on:{click:function(e){t.setMatrixEnabled(),t.initModule("matrix")}}},[t._v("Join Matrix")])]),t._v(" "),t.matrixEnabled&&t.loadedModules.matrix?o("div",[t.matrixEnabled&&!t.matrixLoggedIn?o("div",{staticClass:"matrix-room__logging-in"},[t._v("\n\t\t\t  … connecting to Matrix\n\t\t")]):t._e(),t._v(" "),t.matrixLoggedIn&&!t.sourcesOrdered.length?o("div",{staticClass:"play-list-manager__room-suggestions"},[t._v("\n\t\t\tYou did not join any rooms yet!\n\t\t\t"),o("br"),t._v(" "),o("br"),t._v(" "),o("button",{staticClass:"button btn--blue",on:{click:function(e){t.toggleMatrixRoomDirectory()}}},[o("span",{staticClass:"wmp-icon-format_list_bulleted"}),t._v("\n\t\t\t\trooms\n\t\t\t")]),t._v(" "),o("br"),t._v(" "),o("br"),t._v("\n\t\t\tOpen the room list\n\t\t\tor\n\t\t\tcreate your own room.\n\t\t")]):t._e(),t._v(" "),o("matrix-create-room"),t._v(" "),o("matrix-public-rooms"),t._v(" "),t.showMatrixLoginModal?o("div",{staticClass:"modal",on:{click:function(e){t.toggleMatrixLoginModal()}}},[o("div",{staticClass:"modal__body",on:{click:function(t){t.stopPropagation()}}},[t._v("\n\t\t\t\tYou are a guest user. Guest users are not allowed to join this room. Create a full accound with\n\t\t\t\t"),o("a",{attrs:{href:"https://riot.im/app/#/room/#audius:matrix.org",target:"_blank",rel:"noopener"}},[t._v("Riot")]),t._v("\n\t\t\t\tor "),o("a",{attrs:{href:"https://matrix.org/docs/projects/try-matrix-now.html#clients",target:"_blank",rel:"noopener"}},[t._v("another client")]),t._v(" and login below.\n\t\t\t\t"),o("matrix-login")],1)]):t._e(),t._v(" "),o("draggable",{staticClass:"matrix-room__tags",attrs:{element:"ul",options:{animation:150,scrollSpeed:20,handle:".play-list-manager__drag-handle"}},model:{value:t._sourcesOrdered,callback:function(e){t._sourcesOrdered=e},expression:"_sourcesOrdered"}},t._l(t._sourcesOrdered,function(e){return o("draggable",{key:e,staticClass:"play-list-manager__tag-drop-zone",class:{active:t.currentMediaSource.id==e},attrs:{element:"li",options:{sort:!1,handle:".no-handle",group:{name:"lists"}}},on:{add:function(o){t.dropAdd(o,e)}}},[o("div",{staticClass:"play-list-manager__drag-handle"}),t._v(" "),o("div",{staticClass:"play-list-manager__tag-body",on:{click:function(o){t.selectMediaSource({type:"webScraper",id:e})}}},[o("div",[t._v("\n\t\t\t\t\t\t"+t._s(t.sources[e].name)+"\n\t\t\t\t\t")]),t._v(" "),o("div",[t._v("\n\t\t\t\t\t\t"+t._s(t.sources[e].playList.length-Object.keys(t.sources[e].playedMedia).length)+" New\n\t\t\t\t\t\t"+t._s(t.numWatched(e))+" Watched\n\t\t\t\t\t")])]),t._v(" "),o("div",{staticClass:"play-list-manager__menu"},[o("span",{staticClass:"wmp-icon-mode_edit",attrs:{title:"Edit room"},on:{click:function(o){o.stopPropagation(),t.setShowMediumSettings({medium:"matrix",id:e})}}}),t._v(" "),o("span",{staticClass:"wmp-icon-close",attrs:{title:"Leave room"},on:{click:function(o){o.stopPropagation(),t.showConfirmDelte=e}}})])])})),t._v(" "),o("ul",{staticClass:"matrix-room__tags"},[t.matrixLoggedIn?o("li",{staticClass:"play-list-manager__input"},[o("div",{staticClass:"play-list-manager__tag-body"},[o("input",{attrs:{type:"text",placeholder:"… room id or name"},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.addMatrixRoom(e)}}})]),t._v(" "),o("div",{staticClass:"matrix-room__room-join-create"},[o("span",{staticClass:"wmp-icon-add",attrs:{title:"Create / join room"},on:{click:t.addMatrixRoom}})]),t._v(" "),o("div",{staticClass:"matrix-room__room-list"},[o("span",{staticClass:"wmp-icon-format_list_bulleted",attrs:{title:"Room List"},on:{click:function(e){t.toggleMatrixRoomDirectory()}}})])]):t._e()]),t._v(" "),t.showConfirmDelte?o("div",{staticClass:"modal",on:{click:function(e){t.showConfirmDelte=!1}}},[o("div",{staticClass:"modal__body",on:{click:function(t){t.stopPropagation()}}},[t._v("\n\t\t\t\tAre you sure you want to leave the room?\n\t\t\t\t"),o("div",{staticClass:"modal__btn-group"},[o("button",{staticClass:"button",on:{click:function(e){t.showConfirmDelte=!1}}},[t._v("Cancel")]),t._v(" "),o("button",{staticClass:"button btn--blue",on:{click:function(e){e.stopPropagation(),t.leaveMatrixRoom(t.showConfirmDelte),t.showConfirmDelte=!1}}},[t._v("Leave")])])])]):t._e()],1):t._e()])},s=[];i._withStripped=!0;var l={render:i,staticRenderFns:s},c=l,u=!1,m=o(1),d=r,p=m(n.a,c,!1,d,null,null);p.options.__file="src/components/matrix-room-manager.vue",p.esModule&&Object.keys(p.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");e.default=p.exports},344:function(t,e,o){var r=o(345);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);o(3)("754bd56c",r,!1)},345:function(t,e,o){e=t.exports=o(2)(void 0),e.push([t.i,"\n.matrix-room__menu {\n  display: none;\n}\n.matrix-room {\n  color: #fff;\n}\n.matrix-room .modal__body {\n    color: #707379;\n}\n.matrix-room__room-join-create:before,\n.matrix-room__room-list:before {\n  position: absolute;\n  transform: rotate(-53.4deg);\n  transform-origin: 5.8rem 3.5rem;\n  font-size: 0.8rem;\n  color: #E2E4E9;\n  pointer-events: none;\n}\n.matrix-room__room-list:before {\n  content: 'ROOMS';\n}\n.matrix-room__room-join-create:before {\n  content: 'CREATE';\n}\n.matrix-room__logging-in,\n.play-list-manager__enable-matrix {\n  width: 100%;\n  text-align: center;\n  padding: 0 0.45rem;\n  margin-top: 3.15rem;\n}\n.play-list-manager__room-suggestions {\n  margin: 0.45rem;\n  text-align: center;\n}\n.play-list-manager__room-suggestions span {\n    text-decoration: underline;\n    cursor: pointer;\n}\n.play-list-manager__room-suggestions > button.button {\n    padding: 0 0.9rem;\n    display: inline-flex;\n    align-items: center;\n}\n.play-list-manager__room-suggestions > button.button > span {\n      margin-right: 0.9rem;\n}\n",""])},346:function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},n=o(0),i=o(10),s=r(i),l=o(347),c=r(l),u=o(352),m=r(u),d=o(158),p=r(d),_=o(4);e.default={components:{draggable:s.default,MatrixCreateRoom:c.default,MatrixPublicRooms:m.default,MatrixLogin:p.default},data:function(){return{showConfirmDelte:!1}},created:function(){this.matrixEnabled&&this.initModule("matrix")},methods:a({},(0,n.mapMutations)(["setMatrixEnabled","selectMediaSource","setShowMediumSettings","toggleMatrixRoomModal","toggleMatrixRoomDirectory","toggleMatrixLoginModal","setMatrixRoomTag","error"]),(0,n.mapActions)(["joinMatrixRoom","leaveMatrixRoom","matrixSend","initModule"]),{addMatrixRoom:function(){var t=document.querySelector(".matrix-room input");/#[\w-]+:[\w-]+\.\w{2,}/.test(t.value)?this.joinMatrixRoom({id:t.value}):this.toggleMatrixRoomModal(t.value||!0),t.value=""},dropAdd:function(t,e){var o=t.item.dataset.id;this.matrixSend({roomId:e,itemId:o})},numWatched:function(t){return t in this.matrixRooms?(this.matrixRooms[t].archive?this.matrixRooms[t].archive.length:0)+Object.keys(this.matrixRooms[t].playedMedia).length:0}}),computed:a({},(0,n.mapState)(["matrixEnabled","loadedModules","currentMediaSource"]),(0,_.mapModuleState)("matrix",["sources","sourcesOrdered","matrixLoggedIn","showMatrixLoginModal"]),{_sourcesOrdered:{get:function(){return this.sourcesOrdered},set:function(t){this.error("not implemented")}}})}},347:function(t,e,o){"use strict";function r(t){u||o(348)}Object.defineProperty(e,"__esModule",{value:!0});var a=o(350),n=o.n(a),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.createMatrixRoomModal?o("div",{staticClass:"modal matrix-create",on:{click:t.close}},[o("div",{staticClass:"modal__body",on:{click:function(t){t.stopPropagation()}}},[!1!==t.matrix.isGuest?o("div",[t._v("\n\t\t\tYou are a guest user. Guest users are not allowed to create rooms. Create a full accound with\n\t\t\t\t"),o("a",{attrs:{href:"https://riot.im/app/#/room/#audius:matrix.org",target:"_blank",rel:"noopener"}},[t._v("Riot")]),t._v("\n\t\t\t\tor "),o("a",{attrs:{href:"https://matrix.org/docs/projects/try-matrix-now.html#clients",target:"_blank",rel:"noopener"}},[t._v("another client")]),t._v(" and login below.\n\t\t\t"),o("p",[o("matrix-login")],1)]):o("div",[o("h3",[t._v("Create matrix room")]),t._v(" "),o("p"),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.roomName,expression:"roomName"}],staticClass:"input--border",attrs:{type:"text",placeholder:"Room name"},domProps:{value:t.roomName},on:{input:function(e){e.target.composing||(t.roomName=e.target.value)}}})]),t._v(" "),o("div",{staticClass:"spacer"}),t._v("\n\t\t\t\t#"+t._s(t.slugName)+":matrix.org\n\t\t\t"),o("p"),t._v(" "),o("p"),t._m(0),t._v(" "),o("p"),t._v(" "),o("div",{staticClass:"modal__btn-group"},[o("button",{staticClass:"button",on:{click:t.close}},[t._v("Cancel")]),t._v(" "),o("button",{staticClass:"button btn--blue",attrs:{disabled:t.roomName.length<5,title:t.roomName.length<5?"The room name must be at least 5 characters long":""},on:{click:t._createMatrixRoom}},[t._v("create")])])])])]):t._e()},s=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("input",{attrs:{type:"checkbox",id:"hidden-room-m"}}),o("label",{attrs:{for:"hidden-room-m"}}),t._v("\n\t\t\t\t\tHidden\n\t\t\t\t\t"),o("span",{staticClass:"smaller"},[t._v("Not publicly listed")])])}];i._withStripped=!0;var l={render:i,staticRenderFns:s},c=l,u=!1,m=o(1),d=r,p=m(n.a,c,!1,d,null,null);p.options.__file="src/components/matrix-create-room.vue",p.esModule&&Object.keys(p.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");e.default=p.exports},348:function(t,e,o){var r=o(349);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);o(3)("451fa803",r,!1)},349:function(t,e,o){e=t.exports=o(2)(void 0),e.push([t.i,"\n.matrix-create input {\n  width: 100%;\n  margin-bottom: 0.45rem;\n}\n",""])},350:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},a=o(0),n=o(351),i=o(158),s=function(t){return t&&t.__esModule?t:{default:t}}(i),l=o(4);e.default={components:{MatrixLogin:s.default},data:function(){return{roomName:""}},created:function(){var t=this;this.$store.watch(function(t){return t.createMatrixRoomModal},function(){"string"==typeof t.createMatrixRoomModal&&(t.roomName=t.createMatrixRoomModal)})},methods:r({},(0,a.mapActions)(["createMatrixRoom"]),(0,a.mapMutations)(["toggleMatrixRoomModal"]),{close:function(){this.toggleMatrixRoomModal(!1)},_createMatrixRoom:function(){var t=this.$el.querySelector("#hidden-room-m").checked?"privat":"public";this.createMatrixRoom({room_alias_name:this.slugName,visibility:t,name:this.roomName+" [Audius]",topic:"Join this room at https://audius.rockdapus.org?import=#"+this.slugName+":matrix.org&type=room&title="+encodeURIComponent(this.roomName)})},matrixLogin:function(){var t=this.$el.querySelector("#username"),e=this.$el.querySelector("#password");this.loginMatrixWithPassword({username:t.value,password:e.value}),this.$el.querySelector("#username").value="",this.$el.querySelector("#password").value=""}}),computed:r({},(0,l.mapModuleState)("matrix",["createMatrixRoomModal","matrix"]),{slugName:function(){return this.roomName.length<5?"…":(0,n.slugify)(this.roomName).slice(0,20).replace(/-$/,"")+"-audius"}})}},351:function(t,e,o){"use strict";function r(t){t=t.replace(/^\s+|\s+$/g,""),t=t.toLowerCase();for(var e="ãàáäâẽèéëêìíïîõòóöôùúüûñç·/_,:;",o="aaaaaeeeeeiiiiooooouuuunc------",r=0,a=e.length;r<a;r++)t=t.replace(new RegExp(e.charAt(r),"g"),o.charAt(r));return t=t.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}Object.defineProperty(e,"__esModule",{value:!0}),e.slugify=r},352:function(t,e,o){"use strict";function r(t){u||o(353)}Object.defineProperty(e,"__esModule",{value:!0});var a=o(355),n=o.n(a),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.showMatrixRoomDirectory?o("div",[o("div",{staticClass:"modal matrix-public-rooms",on:{click:t.close}},[o("div",{staticClass:"modal__body",on:{click:function(t){t.stopPropagation()}}},[o("h3",[t._v("Public rooms")]),t._v(" "),t.matrix.publicRooms&&t.matrix.publicRooms.length?t._e():o("div",{staticClass:"about-player__community-btns"},[o("a",{staticClass:"button btn--blue",attrs:{href:"?import=!zKinTrtpQEyHfnIbnI:matrix.org&type=room&title=Random"}},[t._v("Random")]),t._v(" "),o("a",{staticClass:"button btn--blue",attrs:{href:"?import=!VTIhlnDdHsxZFZQNFh:matrix.org&type=room&title=Rock"}},[t._v("Rock")]),t._v(" "),o("a",{staticClass:"button btn--blue",attrs:{href:"?import=!sgKmJzakMmEdSCgKCE:matrix.org&type=room&title=Electronic"}},[t._v("Electronic")])]),t._v(" "),t.matrix.publicRooms&&t.matrix.publicRooms.length?t._e():o("div",[o("br"),t._v("\n\t\t\t\t… press below to update rooms, it might take a while.\n\t\t\t")]),t._v(" "),o("div",{staticClass:"matrix-public-rooms__buttons"},t._l(t.matrix.publicRooms,function(e){return o("a",{staticClass:"button btn--blue",attrs:{title:"["+e.numberOfMembers+" Members] "+e.topic,href:"?import="+e.id+"&type=room&title="+encodeURIComponent(e.name)}},[t._v("\n\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t")])})),t._v(" "),o("div",{staticClass:"modal__btn-group"},[o("button",{staticClass:"button",on:{click:t.close}},[t._v("Cancel")]),t._v(" "),o("button",{staticClass:"button btn--blue-ghost",on:{click:t.updatePublicRooms}},[t._v("update room list")])])])])]):t._e()},s=[];i._withStripped=!0;var l={render:i,staticRenderFns:s},c=l,u=!1,m=o(1),d=r,p=m(n.a,c,!1,d,null,null);p.options.__file="src/components/matrix-public-rooms.vue",p.esModule&&Object.keys(p.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");e.default=p.exports},353:function(t,e,o){var r=o(354);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);o(3)("9126cbac",r,!1)},354:function(t,e,o){e=t.exports=o(2)(void 0),e.push([t.i,"\n.matrix-create input {\n  width: 100%;\n  margin-bottom: 0.45rem;\n}\n.matrix-public-rooms__buttons {\n  display: flex;\n  flex-wrap: wrap;\n}\n.matrix-public-rooms__buttons > * {\n    margin: 0 0.45rem 0.45rem 0;\n}\n",""])},355:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},a=o(0),n=o(4);e.default={methods:r({},(0,a.mapActions)(["updatePublicRooms"]),(0,a.mapMutations)(["toggleMatrixRoomDirectory"]),{close:function(){this.toggleMatrixRoomDirectory(!1)}}),computed:r({},(0,n.mapModuleState)("matrix",["showMatrixRoomDirectory","matrix"]))}}});