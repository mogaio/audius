(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{121:function(e,t,i){},206:function(e,t,i){"use strict";var a=i(121);i.n(a).a},352:function(e,t,i){"use strict";i.r(t);var a=i(0),s=i(3),o=i(1);function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){n(e,t,i[t])})}return e}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var c={data:function(){return{copyActive:!1,selectedMediaSourceTab:"tags"}},computed:r({},Object(a.e)(["showMediaEdit","entities","sourcesOrdered","sources","playList","currentMediaSource","matrix","webScraper"]),Object(o.p)("webScraper",{webScrapers:"sources",webScrapersOrdered:"sourcesOrdered"}),Object(o.p)("matrix",{matrixRooms:"sources",matrixRoomsOrdered:"sourcesOrdered",matrixLoggedIn:"matrixLoggedIn"}),{media:function(){return this.showMediaEdit?Object(s.d)(this.$store.state,this.showMediaEdit):{}},removeFrom:function(){var e=this,t={tags:this.sourcesOrdered.filter(function(t){return e.sources[t].includes(e.media.id)}),matrixRooms:this.matrix.sourcesOrdered.filter(function(t){return e.matrix.sources[t].playList.some(function(t){return t.id===e.media.id})}),webScrapers:this.webScraper.sourcesOrdered.filter(function(t){return e.webScraper.sources[t].playList.some(function(t){return t.id===e.media.id})})};return this.playList.includes(this.media.id)&&t.tags.unshift("Default"),t},addTo:function(){var e=this,t=this.removeFrom,i={tags:this.sourcesOrdered.filter(function(e){return!t.tags.includes(e)}),matrixRooms:this.matrixRoomsOrdered.filter(function(t){return!e.matrixRooms[t].playList.some(function(t){return t.id===e.media.id})})};return i.tags.includes("Default")||this.playList.includes(this.media.id)||i.tags.unshift("Default"),i},sourceLink:function(){return"youtube"===this.media.type?this.youtubeLink():this.media.href?this.media.href:""},sourceApiNames:function(){return[{api:"tags",label:"playlist"},{api:"matrixRooms",label:"room"},{api:"webScrapers",label:"channel"}]},backgroundImage:function(){return"youtube"!==this.media.type||this.media.hasError?this.media.thumbUrl?"url(".concat(this.media.thumbUrl,")"):"":"url(https://i.ytimg.com/vi/".concat(this.media.youtubeId||this.media.id,"/default.jpg)")}}),methods:r({},Object(a.b)(["matrixSend","matrixRedact"]),Object(a.d)(["updateMedia","addSearchResult","removeMedia","play","queue"]),{_setName:Object(o.d)(function(e){this.patchMedia({name:e})},1e3),id2name:function(e){return this.matrixRooms[e].name},addMediaTo:function(e,t){"matrixRooms"===e?this.matrixSend({media:this.media,roomId:t}):"tags"===e&&this.addSearchResult({media:this.media,tagName:"Default"===t?"":t})},removeMediaFrom:function(e,t){"matrixRooms"===e?this.matrixRedact(this.media):"tags"===e&&this.removeMedia({mediaIds:[this.media.id],tagName:"Default"===t?"":t})},youtubeLink:function(){return this.media?Object(o.y)(this.media):""},copyToClip:function(){var e=this;window.getSelection().removeAllRanges();var t=document.createElement("div");t.innerHTML=Object(o.g)(this.media),document.body.appendChild(t);var i=document.createRange();i.selectNode(t),window.getSelection().addRange(i);try{document.execCommand("copy"),this.copyActive=!0,setTimeout(function(){e.copyActive=!1,e.selected=!1},800)}catch(e){this.error("Error copying to clipboard ".concat(e))}window.getSelection().removeAllRanges(),t.parentNode.removeChild(t)}})},d=(i(206),i(2)),u=Object(d.a)(c,function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.showMediaEdit?i("div",{staticClass:"settings media-edit"},[i("div",{staticClass:"media-edit__header"},[i("div",{staticClass:"media-list__thumbnail",style:{backgroundImage:e.backgroundImage}}),e._v(" "),i("input",{staticClass:"media-edit__name",attrs:{type:"text",placeholder:"… title"},domProps:{value:e.media.title},on:{input:function(t){e._setMediaTitle(e.currentMediaSource.id,t.target.value)}}})]),e._v(" "),i("div",{staticClass:"media-edit__body"},[i("div",{staticClass:"button-group media-edit__link-buttons"},[i("button",{staticClass:"button",attrs:{title:"Play"},on:{click:function(t){e.play({media:e.media})}}},[i("span",{staticClass:"wmp-icon-play"})]),e._v(" "),i("button",{staticClass:"button",class:{active:e.copyActive},attrs:{title:"Add to queue"},on:{click:function(t){e.queue(e.media)}}},[i("span",{staticClass:"wmp-icon-queue2 icon--small"})]),e._v(" "),i("button",{staticClass:"button",class:{active:e.copyActive},attrs:{title:"Copy name and URL"},on:{click:e.copyToClip}},[i("span",{staticClass:"copy wmp-icon-copy icon--small",class:{active:e.copyActive}})]),e._v(" "),i("a",{staticClass:"button",attrs:{title:"Visit media source",target:"_blank",href:e.sourceLink}},[i("span",{class:{"wmp-icon-link":["video","audio"].includes(e.media.type),"wmp-icon-youtube icon--small":"youtube"===e.media.type,"wmp-icon-vimeo  icon--small":"vimeo"===e.media.type}})])]),e._v(" "),i("div",{staticClass:"spacer"}),e._v(" "),i("div",{staticClass:"spacer"}),e._v(" "),i("div",{staticClass:"button-group"},e._l(e.sourceApiNames,function(t){return i("button",{staticClass:"button btn--blue-ghost",class:{"btn--blue":e.selectedMediaSourceTab==t.api},on:{click:function(i){e.selectedMediaSourceTab=t.api}}},[e._v(e._s(t.label))])})),e._v(" "),e._l(e.sourceApiNames,function(t){return e.selectedMediaSourceTab==t.api?i("div",[i("ul",e._l(e.removeFrom[t.api],function(a){return i("li",{staticClass:"active",attrs:{title:"tags"===t.api?"Remove from "+t.label:""},on:{click:function(i){e.removeMediaFrom(t.api,a)}}},[i("div",[e._v(" "+e._s("matrixRooms"===t.api?e.id2name(a):a)+" ")]),e._v(" "),"tags"===t.api?i("span",{staticClass:"wmp-icon-close"}):e._e()])})),e._v(" "),i("ul",{attrs:{if:"src.api in addTo"}},e._l(e.addTo[t.api],function(a){return i("li",{attrs:{title:"Add to "+t.label},on:{click:function(i){e.addMediaTo(t.api,a)}}},[i("div",[e._v(" "+e._s("matrixRooms"===t.api?e.id2name(a):a)+" ")]),e._v(" "),i("span",{staticClass:"wmp-icon-add"})])}))]):e._e()}),e._v(" "),"webScrapers"!=e.selectedMediaSourceTab||e.removeFrom.webScrapers.length?e._e():i("p",[e._v("\n\t\t\t… nothing found\n\t\t")]),e._v(" "),"matrixRooms"!=e.selectedMediaSourceTab||e.matrixLoggedIn?e._e():i("p",[e._v("\n\t\t\t… matrix not connected\n\t\t")]),e._v(" "),i("div",{staticClass:"spacer"})],2)]):e._e()},[],!1,null,null,null);u.options.__file="media-edit.vue";t.default=u.exports}}]);