(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{147:function(t,e,i){"use strict";i.r(e);var a=i(481),s=i(228);for(var r in s)"default"!==r&&function(t){i.d(e,t,function(){return s[t]})}(r);i(346);var o=i(0),n=Object(o.a)(s.default,a.a,a.b,!1,null,null,null);e.default=n.exports},228:function(t,e,i){"use strict";i.r(e);var a=i(229),s=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);e.default=s.a},229:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},s=i(1),r=i(48),o=i(2);e.default={data:function(){return{copyActive:!1,selectedMediaSourceTab:"tags"}},computed:a({},(0,s.mapState)(["showMediaEdit","entities","sourcesOrdered","sources","playList","currentMediaSource","matrix","webScraper"]),(0,o.mapModuleState)("webScraper",{webScrapers:"sources",webScrapersOrdered:"sourcesOrdered"}),(0,o.mapModuleState)("matrix",{matrixRooms:"sources",matrixRoomsOrdered:"sourcesOrdered",matrixLoggedIn:"matrixLoggedIn"}),{media:function(){return this.showMediaEdit?(0,r.getMediaEntity)(this.$store.state,this.showMediaEdit):{}},removeFrom:function(){var t=this,e={tags:this.sourcesOrdered.filter(function(e){return t.sources[e].includes(t.media.id)}),matrixRooms:this.matrix.sourcesOrdered.filter(function(e){return t.matrix.sources[e].playList.some(function(e){return e.id===t.media.id})}),webScrapers:this.webScraper.sourcesOrdered.filter(function(e){return t.webScraper.sources[e].playList.some(function(e){return e.id===t.media.id})})};return this.playList.includes(this.media.id)&&e.tags.unshift("Default"),e},addTo:function(){var t=this,e=this.removeFrom,i={tags:this.sourcesOrdered.filter(function(t){return!e.tags.includes(t)}),matrixRooms:this.matrixRoomsOrdered.filter(function(e){return!t.matrixRooms[e].playList.some(function(e){return e.id===t.media.id})})};return i.tags.includes("Default")||this.playList.includes(this.media.id)||i.tags.unshift("Default"),i},sourceLink:function(){return"youtube"===this.media.type?this.youtubeLink():this.media.href?this.media.href:""},sourceApiNames:function(){return[{api:"tags",label:"playlist"},{api:"matrixRooms",label:"room"},{api:"webScrapers",label:"channel"}]},backgroundImage:function(){return"youtube"!==this.media.type||this.media.hasError?this.media.thumbUrl?"url("+this.media.thumbUrl+")":"":"url(https://i.ytimg.com/vi/"+(this.media.youtubeId||this.media.id)+"/default.jpg)"}}),methods:a({},(0,s.mapActions)(["matrixSend","matrixRedact"]),(0,s.mapMutations)(["updateMedia","addSearchResult","removeMedia","play","queue"]),{_setName:(0,o.debounce)(function(t){this.patchMedia({name:t})},1e3),id2name:function(t){return this.matrixRooms[t].name},addMediaTo:function(t,e){"matrixRooms"===t?this.matrixSend({media:this.media,roomId:e}):"tags"===t&&this.addSearchResult({media:this.media,tagName:"Default"===e?"":e})},removeMediaFrom:function(t,e){"matrixRooms"===t?this.matrixRedact(this.media):"tags"===t&&this.removeMedia({mediaIds:[this.media.id],tagName:"Default"===e?"":e})},youtubeLink:function(){return this.media?(0,o.youtubeLink)(this.media):""},copyToClip:function(){var t=this;window.getSelection().removeAllRanges();var e=document.createElement("div");e.innerHTML=(0,o.getMediaLink)(this.media),document.body.appendChild(e);var i=document.createRange();i.selectNode(e),window.getSelection().addRange(i);try{document.execCommand("copy"),this.copyActive=!0,setTimeout(function(){t.copyActive=!1,t.selected=!1},800)}catch(t){this.error("Error copying to clipboard "+t)}window.getSelection().removeAllRanges(),e.parentNode.removeChild(e)}})}},230:function(t,e,i){},346:function(t,e,i){"use strict";var a=i(230);i.n(a).a},481:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showMediaEdit?i("div",{staticClass:"settings media-edit"},[i("div",{staticClass:"media-edit__header"},[i("div",{staticClass:"media-list__thumbnail",style:{backgroundImage:t.backgroundImage}}),t._v(" "),i("input",{staticClass:"media-edit__name",attrs:{type:"text",placeholder:"… title"},domProps:{value:t.media.title},on:{input:function(e){t._setMediaTitle(t.currentMediaSource.id,e.target.value)}}})]),t._v(" "),i("div",{staticClass:"media-edit__body"},[i("div",{staticClass:"button-group media-edit__link-buttons"},[i("button",{staticClass:"button",attrs:{title:"Play"},on:{click:function(e){t.play({media:t.media})}}},[i("span",{staticClass:"wmp-icon-play"})]),t._v(" "),i("button",{staticClass:"button",class:{active:t.copyActive},attrs:{title:"Add to queue"},on:{click:function(e){t.queue(t.media)}}},[i("span",{staticClass:"wmp-icon-queue2 icon--small"})]),t._v(" "),i("button",{staticClass:"button",class:{active:t.copyActive},attrs:{title:"Copy name and URL"},on:{click:t.copyToClip}},[i("span",{staticClass:"copy wmp-icon-copy icon--small",class:{active:t.copyActive}})]),t._v(" "),i("a",{staticClass:"button",attrs:{title:"Visit media source",target:"_blank",href:t.sourceLink}},[i("span",{class:{"wmp-icon-link":["video","audio"].includes(t.media.type),"wmp-icon-youtube icon--small":"youtube"===t.media.type,"wmp-icon-vimeo  icon--small":"vimeo"===t.media.type}})])]),t._v(" "),i("div",{staticClass:"spacer"}),t._v(" "),i("div",{staticClass:"spacer"}),t._v(" "),i("div",{staticClass:"button-group"},t._l(t.sourceApiNames,function(e){return i("button",{staticClass:"button btn--blue-ghost",class:{"btn--blue":t.selectedMediaSourceTab==e.api},on:{click:function(i){t.selectedMediaSourceTab=e.api}}},[t._v(t._s(e.label))])})),t._v(" "),t._l(t.sourceApiNames,function(e){return t.selectedMediaSourceTab==e.api?i("div",[i("ul",t._l(t.removeFrom[e.api],function(a){return i("li",{staticClass:"active",attrs:{title:"tags"===e.api?"Remove from "+e.label:""},on:{click:function(i){t.removeMediaFrom(e.api,a)}}},[i("div",[t._v(" "+t._s("matrixRooms"===e.api?t.id2name(a):a)+" ")]),t._v(" "),"tags"===e.api?i("span",{staticClass:"wmp-icon-close"}):t._e()])})),t._v(" "),i("ul",{attrs:{if:"src.api in addTo"}},t._l(t.addTo[e.api],function(a){return i("li",{attrs:{title:"Add to "+e.label},on:{click:function(i){t.addMediaTo(e.api,a)}}},[i("div",[t._v(" "+t._s("matrixRooms"===e.api?t.id2name(a):a)+" ")]),t._v(" "),i("span",{staticClass:"wmp-icon-add"})])}))]):t._e()}),t._v(" "),"webScrapers"!=t.selectedMediaSourceTab||t.removeFrom.webScrapers.length?t._e():i("p",[t._v("\n\t\t\t… nothing found\n\t\t")]),t._v(" "),"matrixRooms"!=t.selectedMediaSourceTab||t.matrixLoggedIn?t._e():i("p",[t._v("\n\t\t\t… matrix not connected\n\t\t")]),t._v(" "),i("div",{staticClass:"spacer"})],2)]):t._e()},s=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s})}}]);