!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=134)}({134:function(e,t,n){"use strict";var r=n(69),i=n(135),o=!!document.querySelector("#audius-website"),u=!1;window.addEventListener("audiusExtensionHandshake",function(e){window.dispatchEvent(new CustomEvent("audius",{detail:{vuex:"commit",type:"setExtensionAvilable",data:!0}}))},!1);var a=void 0,s=new Set;chrome.runtime.onMessage.addListener(function(e,t){if(e.audius)if(o)window.dispatchEvent(new CustomEvent("audius",{detail:e}));else if("startWatching"===e.type){if(u=!0,!a){window.console.log("## Audius startWatching request observer",e,a),a=new MutationObserver((0,i.debounce)(function(){if(u){var t=r.webScraper.findMediaInElement(document.body).filter(function(e){var t=e.id;return!s.has(t)});t.forEach(function(e){var t=e.id;return s.add(t)}),t.length&&chrome.runtime.sendMessage({audius:!0,vuex:"dispatch",type:"webScraperUpdateSuccess",data:{id:e.id,mediaList:t}},function(){})}}),1e3);var n=r.webScraper.findMediaInElement(document.body).filter(function(e){var t=e.id;return!s.has(t)});n.forEach(function(e){var t=e.id;return s.add(t)}),window.console.log("## Audius inital scrape: ",n.length),n.length&&chrome.runtime.sendMessage({audius:!0,vuex:"dispatch",type:"webScraperUpdateSuccess",data:{id:e.id,mediaList:n}},function(){})}a.observe(document.body,{subtree:!0,childList:!0,characterData:!0})}else a&&"stopWatching"===e.type&&(u=!1,window.console.log("## Audius stopWatching"),a.disconnect())}),window.addEventListener("audiusExtension",function(e){chrome.runtime.sendMessage(e.detail,function(e){})},!1)},135:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounceImmediate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=void 0,r=void 0,i=void 0,o=void 0,u=0;return function(){i=this,r=[].slice.call(arguments,0),o=new Date,0===u&&e.apply(i,r),++u;n||(n=setTimeout(function a(){var s=new Date-o;s<t?n=setTimeout(a,t-s):(n=null,u>1&&e.apply(i,r),u=0)},t))}},t.debounce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=void 0,r=void 0,i=void 0,o=void 0;return function(){i=this,r=[].slice.call(arguments,0),o=new Date;n||(n=setTimeout(function u(){var a=new Date-o;a<t?n=setTimeout(u,t-a):(n=null,e.apply(i,r))},t))}},t.throttle=function(e,t,n){t||(t=250);var r=void 0,i=void 0;return function(){var o=n||this,u=+new Date,a=arguments;r&&u<r+t?(clearTimeout(i),i=setTimeout(function(){r=u,e.apply(o,a)},t)):(r=u,e.apply(o,a))}}},31:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hashCode=function(e){var t=0,n=void 0,r=void 0;if(0===e.length)return t;for(n=0;n<e.length;n++)r=e.charCodeAt(n),t=(t<<5)-t+r,t|=0;return t}},32:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ajaxJSON=function(e,t,n){return new Promise(function(r,i){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status)try{var n=JSON.parse(o.responseText);void 0!==t&&t(n),r(n)}catch(e){i("Ajax JSON parse failed "+e)}else void 0!==t&&console.warn("Ajax error "+o.status+" loading "+e),i("Ajax error "+o.status+" loading "+e)},o.open(n?"POST":"GET",e,!0),o.send(n)})},t.ajaxRaw=function(e,t){return new Promise(function(n,r){var i=new XMLHttpRequest;i.open("GET",e,!0),i.onload=function(){this.status>=200&&this.status<300?n(this.responseText):r("Ajax request for "+e+" failed , because "+this.statusText)},t&&i.setRequestHeader.apply(i,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t)),i.onerror=function(t){r("Error requesting "+e)},i.send()})},t.ajaxPostJSON=function(e,t){return new Promise(function(n,r){var i=new XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&(i.status>=200&&i.status<300?n(i.responseText):r("Ajax error "+i.status+" posting data to "+e))},i.open(t?"POST":"GET",e,!0),i.setRequestHeader("Content-Type","application/json; charset=utf-8"),i.send(t)})}},33:function(e,t,n){"use strict";function r(e,t){var n="000000000"+e;return n.substr(n.length-t)}Object.defineProperty(t,"__esModule",{value:!0}),t.zeroPad=r,t.s2time=function(e){var t=void 0,n=void 0,i=void 0;i=Math.floor(e);var o=e%1;return n=Math.floor(i/60),i%=60,t=Math.floor(n/60),n%=60,{d:Math.floor(t/24),h:t%=24,m:n,s:r(i,2),ms:o}},t.time2s=function(e){e.s=parseInt(e.s,10);var t=Object.assign({h:0,m:0,s:0},e);return 60*(60*t.h+t.m)+t.s},t.duration=function(e){if(!e)return{};var t=e.match(/PT(\d+H)?(\d+M)?(\d+S)?/);return{h:parseInt(t[1],10)||0,m:parseInt(t[2],10)||0,s:r(parseInt(t[3],10)||0,2)}}},49:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.youTubePlaylistRexEx=t.isYouTubeVideoRegEx=void 0;var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.parseYoutubeDescription=v,t.findYouTubeIdsText=function(e){var t=[],n=void 0;for(;n=c.exec(e);)t.push(decodeURIComponent(n[1]));for(;n=d.exec(e);)t.push(decodeURIComponent(n[1]));return t},t.getYtContentDetailURL=h,t.getPlayList=function(e,t){var n="https://www.googleapis.com/youtube/v3/playlistItems?part=contentDetails&type=video&maxResults=50&playlistId="+s.exec(t)[1]+"&key="+e,r=void 0;return(0,i.ajaxJSON)(n).then(function(t){return r=t,(0,i.ajaxJSON)(h(e,r.items.map(function(e){return e.contentDetails.videoId}).join(","),!0))}).then(function(e){return r.items.map(function(t,n){return m(Object.assign({},t,e.items[n]))})})},t.searchYoutube=function(e,t){if(a.test(t))return(0,i.ajaxJSON)(h(e,a.exec(t)[1],!0)).then(function(e){return e.items.map(function(e){return m(e)})});var n="https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=20&q="+t+"&key="+e,r=void 0;return(0,i.ajaxJSON)(n).then(function(t){return r=t,(0,i.ajaxJSON)(h(e,r.items.map(function(e){return e.id.videoId}).join(","),!0))}).then(function(e){return r.items.map(function(t,n){return m(Object.assign({},t,e.items[n]))})})},t.getYouTubeInfo=function(e){var t=e.ids,n=e.youtubeApiKey,r="https://www.googleapis.com/youtube/v3/videos?part=contentDetails,snippet&id="+t.join(",")+"&key="+n;return(0,i.ajaxJSON)(r).then(function(e){return e.items.map(function(e){return m(e)})})};var i=n(32),o=n(33),u=n(50),a=t.isYouTubeVideoRegEx=/.*youtu(?:be\.com\/watch\?v=|\.be\/)([\w\-_]*)(&(amp;)?‌​[\w?‌​=]*)?/,s=t.youTubePlaylistRexEx=/.*youtu(?:be\.com\/|\.be\/).*list=([\w\-_]*)/,c=/youtu.be\/([\w-]+)/g,d=/youtube.com\/watch\?.*v=([\w-]+)/g,l=/((\d+):)?(\d+):(\d{1,2})/,f=/^[-\W\d]*/,p=/[-\W\d]*$/;function v(e){var t=e.snippet||{},n=t.description||"",i=e.contentDetails?e.contentDetails.duration:void 0,a=e.id;return n.split("\n").filter(function(e){return l.test(e)}).map(function(e,n){var s=l.exec(e),c=r(s,5),d=c[2],v=c[3],m=c[4],h=d?parseInt(d,10):0,y=parseInt(v,10),b=parseInt(m,10),g=e.replace(f,"").replace(p,"")+" - "+t.title;return Object.assign({},u.mediaBaseObject,{id:a+"-track"+(n+1),start:3600*h+60*y+b,title:g,fullTitle:e,durationAlbum:(0,o.time2s)((0,o.duration)(i)),type:"youtube",isTrack:!0,trackId:n+1,youtubeId:a})}).map(function(e,t,n){return t===n.length-1?e.stop=(0,o.time2s)((0,o.duration)(i)):e.stop=n[t+1].start,e}).map(function(e){return e.durationS=e.stop-e.start,e.duration=(0,o.s2time)(e.durationS),e})}function m(e){var t=e.snippet||{},n=v(e),r=e.contentDetails?e.contentDetails.duration:void 0;return Object.assign({},u.mediaBaseObject,{title:t.title,duration:(0,o.duration)(r),durationS:(0,o.time2s)((0,o.duration)(r)),id:e.id,youtubeId:e.id,type:"youtube",tracks:n.length?n:void 0})}function h(e,t,n){return"https://www.googleapis.com/youtube/v3/videos?part=contentDetails"+(n?",snippet":"")+"&id="+t+"&key="+e}},50:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.mediaBaseObject={title:"",duration:{},durationS:0,id:"",type:""}},51:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getVimeoInfo=function(e){return Promise.all(e.map(function(e){return(0,r.ajaxJSON)("https://vimeo.com/api/v2/video/"+e+".json").then(function(t){return{title:t[0].title,duration:(0,i.s2time)(t[0].duration),durationS:t[0].duration,id:e,vimeoId:e,type:"vimeo",href:t[0].url,thumbUrl:t[0].thumbnail_small}})}))},t.findVimeoIdsText=function(e){var t=[],n=void 0;for(;n=o.exec(e);)t.push(n[4]);return t};var r=n(32),i=n(33),o=/(http|https)?:\/\/(www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|)(\d+)(?:|\/\?)/g},69:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.webScraper=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(31),o=n(49),u=n(51),a=n(70),s=n(71);function c(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var d=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.localUrl=t,this.remoteUrl=n}return r(e,[{key:"getMediaData",value:function(e,t,n){var r=this.localUrl?t.replace(this.localUrl,this.remoteUrl):t;return{type:e,title:n||r.substring(r.lastIndexOf("/")+1,r.length),href:this.remoteUrl,url:r,id:""+(0,i.hashCode)(r)}}}]),e}();function l(e,t,n){var r=[];return s.videoRegEx.test(t)?r.push(e.getMediaData("video",t,n)):s.audioRegEx.test(t)&&r.push(e.getMediaData("audio",t,n)),[].concat(r,c((0,o.findYouTubeIdsText)(t).map(function(e){return{type:"youtube",id:e}})),c((0,u.findVimeoIdsText)(t).map(function(e){return{type:"vimeo",id:e}})))}t.webScraper=Object.assign({},a.webScraper,{findMediaInElement:function(e,t,n){var r=new d(t,n),i=e.querySelectorAll("iframe"),o=/youtube\.com\/(v|embed)\/([^"?]+)/,u=/vimeo.com\/video\/([^"?]+)/;return[].concat(c([].concat(c(e.querySelectorAll("[href]"))).reduce(function(t,n){return[].concat(c(t),c(l(r,n.href,e.innerHTML)))},[])),c([].concat(c(e.querySelectorAll("[src]"))).reduce(function(e,t){return[].concat(c(e),c(l(r,t.src)))},[])),c([].concat(c(i)).reduce(function(e,t){var n=o.exec(t.src);return n&&e.push({type:"youtube",id:n[2]}),e},[])),c([].concat(c(i)).reduce(function(e,t){var n=u.exec(t.src);return n&&e.push({type:"vimeo",id:n[1]}),e},[])))},findMediaHtml:function(e,t,n){var r=document.createElement("div");r.innerHTML=e;var i=this.findMediaInElement(r,t,n);return r.remove(),i},scanOneUrl:function(e){var t=this,n=e.url;return this.ajaxRaw(n).then(function(e){return t.findMediaHtml(e,window.location.origin+"/",n.substring(0,n.lastIndexOf("/")+1))})},scanUrl:function(e){var t=this,n=e.url,r=e.youtubeApiKey;try{return this.patternToUrls(n).map(function(e){return t.scanOneUrl({url:e,youtubeApiKey:r})})}catch(e){return[]}}})},70:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.webScraper=void 0;var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=n(31),o=n(32),u=/\[(\d+)-(\d+)\]/;t.webScraper={baseURL:"https://api.imgur.com/3/gallery/hot/viral/",requestHeader:["Authorization","Client-ID c35fbc04fe9ccda"],ajaxJSON:o.ajaxJSON,ajaxRaw:o.ajaxRaw,getImgurMedia:function(e){return(0,o.ajaxRaw)(""+this.baseURL+e+".json",this.requestHeader).then(function(e){return JSON.parse(e).data.filter(function(e){return e.mp4}).map(function(e){return{id:""+(0,i.hashCode)(e.mp4),href:e.link,url:e.mp4,type:"video",title:e.title,thumbUrl:"//i.imgur.com/"+e.id+"s.jpg"}})})},patternToUrls:function(e){if(!u.test(e))return[e];var t=u.exec(e),n=r(t,3),i=n[0],o=n[1],a=n[2];return function(e,t){return Array(t-e+1).fill().map(function(t,n){return e+n})}(parseInt(o,10),parseInt(a,10)).map(function(t){return e.replace(i,t)})}}},71:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.videoRegEx=t.audioRegEx=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.findMediaText=function(e,t,n,r){var u=Object.assign({extendPlayLists:!1},r).extendPlayLists,a=r&&r.mediaList||[],c=[],m=[],h=!1,y=[].concat(d((0,i.findYouTubeIdsText)(e).reduce(v(n,m),[])),d(a.filter(function(e){var t=e.type;return"youtube"===t}).map(function(e){var t=e.id;return t}).reduce(v(n,m),[])));y.length&&c.push((0,i.getYouTubeInfo)({ids:y,youtubeApiKey:t}));u&&i.youTubePlaylistRexEx.test(e)&&(h=!0,c.push((0,i.getPlayList)(t,e)));var b=[].concat(d((0,o.findVimeoIdsText)(e).reduce(v(n,m),[])),d(a.filter(function(e){var t=e.type;return"vimeo"===t}).map(function(e){var t=e.id;return t}).reduce(v(n,m),[])));b.length&&c.push((0,o.getVimeoInfo)(b));var g=(e.match(l)||[]).reduce(v(n,m,!0),[]);g.length&&c.push(Promise.all(g.map(function(e){return(0,s.getMediaDuration)(e,"audio").then(function(t){return p({url:e,href:e,durationS:t,type:"audio"})})})));var w=a.filter(function(e){var t=e.type;return"audio"===t}).reduce(v(n,m),[]);w.length&&c.push(Promise.all(w.map(function(e){return(0,s.getMediaDuration)(e.url,"audio").then(function(t){return p(Object.assign({href:e.url,durationS:t,type:"audio"},e))})})));var x=(e.match(f)||[]).reduce(v(n,m,!0),[]);x.length&&c.push(Promise.all(x.map(function(e){return(0,s.getMediaDuration)(e,"video").then(function(t){return p({url:e,href:e,durationS:t,type:"video"})})})));var j=a.filter(function(e){var t=e.type;return"video"===t}).reduce(v(n,m),[]);j.length&&c.push(Promise.all(j.map(function(e){return(0,s.getMediaDuration)(e.url,"video").then(function(t){return p(Object.assign({href:e.url,durationS:t,type:"video"},e))})})));return Promise.all(c).then(function(e){var t=e.reduce(function(e,t){return[].concat(d(e),d(t))},[]);return{isPlayList:h,newMedia:t,mediaList:[].concat(m,d(t))}})};var i=n(49),o=n(51),u=n(33),a=n(31),s=n(72),c=n(50);function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var l=t.audioRegEx=/(http|https)?:\/\/\S+\.(mp3|oga|m4a|flac|wav|aiff|aif|wma|asf)/gi,f=t.videoRegEx=/(http|https)?:\/\/\S+\.(avi|mkv|mp4|webm|ogg)/gi;function p(e){var t=e.url.split("/"),n=t.length?t[t.length-1]:e.url;return Object.assign({},c.mediaBaseObject,{title:n,duration:e.durationS?(0,u.s2time)(e.durationS):void 0,id:e.id||""+(0,a.hashCode)(e.url)},e)}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=new Set;return function(o,u){var s="object"===("undefined"==typeof id?"undefined":r(id))?u:{},c="object"===("undefined"==typeof id?"undefined":r(id))?u.id:u;if(!c||i.has(c))return o;var d=n?(0,a.hashCode)(c):c;return d in e?t.push(Object.assign({},e[d],s)):o.push(u),i.add(c),o}}},72:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMediaDuration=function(e,t){return new Promise(function(n){var r=void 0;"audio"===t?r=new Audio:"video"===t&&((r=document.createElement(t)).hidden=!0,document.body.appendChild(r)),r.addEventListener("loadeddata",function(){n(Math.round(r.duration)),r.parentNode&&r.parentNode.removeChild(r)},!0),"video"===t&&setTimeout(function(){r.parentNode&&r.parentNode.removeChild(r)},700),r.src=e})}}});